<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>NHCE & NHCM Portal</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
html, body {
    margin: 0; padding: 0;
    overflow: hidden;
    height: 100vh; width: 100vw;
    font-family: 'Segoe UI', Arial, sans-serif;
    /* REAL HORIZON GRADIENT */
    background: linear-gradient(to bottom, 
        #00a8ff 0%,   /* Deep Sky */
        #74ebd5 40%,  /* Mid Sky */
        #ffffff 50%,  /* The Horizon Line */
        #22a6b3 52%,  /* Shallow Water */
        #0a3d62 100%  /* Deep Water */
    );
    position: relative;
    touch-action: none; 
}

#transitionOverlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: #ffffff;
    z-index: 200;
    pointer-events: none;
    opacity: 0;
}

canvas { 
    display: block; position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 1;
    pointer-events: none;
}

.split-view {
    position: relative;
    display: flex;
    width: 100vw;
    height: 100vh;
    z-index: 101;
    pointer-events: none;
}

.portal-side {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
}

.click-zone {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    pointer-events: auto;
    -webkit-tap-highlight-color: transparent;
    padding: 30px;
    z-index: 110;
}

.logo-container {
    position: relative;
    width: clamp(180px, 22vw, 450px); 
    height: clamp(180px, 22vw, 450px);
    display: flex; justify-content: center; align-items: center;
    animation: floating 5s infinite ease-in-out;
}

.logo-container img {
    width: 90%; height: 90%;
    object-fit: contain;
    /* Reflection/Glow effect for the bright horizon */
    filter: drop-shadow(0 0 25px rgba(255, 255, 255, 0.9));
}

.tap-text {
    margin-top: 25px;
    font-size: clamp(22px, 2.8vw, 48px);
    font-weight: 900;
    color: #ffffff; 
    text-transform: uppercase;
    letter-spacing: 4px;
    text-shadow: 0 4px 15px rgba(0,0,0,0.2), 0 0 10px rgba(255,255,255,0.5);
}

@keyframes floating {
    0%, 100% { transform: translateY(0) rotate(-1deg); }
    50% { transform: translateY(-30px) rotate(1deg); }
}
</style>
</head>
<body>

<div id="transitionOverlay"></div>

<div class="split-view">
    <div class="portal-side">
        <div class="click-zone" onclick="startTransition(event, 'index-2.html')">
            <div class="logo-container">
                <img src="images/L1.png" alt="NHCE Logo" />
            </div>
            <div class="tap-text">NHCE EXPLORE →</div>
        </div>
    </div>

    <div class="portal-side">
        <div class="click-zone" onclick="startTransition(event, 'index-3.html')">
            <div class="logo-container">
                <img src="images/L2.png" alt="NHCM Logo" />
            </div>
            <div class="tap-text">NHCM EXPLORE →</div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<script>
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.z = 12;

const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
document.body.appendChild(renderer.domElement);

const fishGroup = new THREE.Group();
const bubbleGroup = new THREE.Group();
scene.add(fishGroup, bubbleGroup);

const fishes = [];
const bubbles = [];

// FISH: Bright tropical colors that pop against blue water
function initScene() {
    const fishColors = [0xffcc00, 0xff5e57, 0xffffff]; // Yellow, Coral, White
    
    for(let i=0; i<15; i++) {
        const color = fishColors[i % 3];
        const fishWrapper = new THREE.Group();
        
        // Body
        const body = new THREE.Mesh(
            new THREE.ConeGeometry(0.35, 1.4, 32),
            new THREE.MeshStandardMaterial({ 
                color: color, 
                metalness: 0.3, 
                roughness: 0.2,
                emissive: color,
                emissiveIntensity: 0.1
            })
        );
        body.rotation.z = Math.PI / 2;
        fishWrapper.add(body);
        
        // Fins
        const fin = new THREE.Mesh(new THREE.BoxGeometry(0.1, 0.5, 0.5), new THREE.MeshStandardMaterial({ color: color }));
        fin.position.x = -0.6;
        fishWrapper.add(fin);

        // Position: Confined to the "Sea" portion (Bottom half)
        fishWrapper.position.set(
            (Math.random() - 0.5) * 25,
            (Math.random() * -6) - 1, // Below the horizon line
            Math.random() * 6
        );
        
        const data = {
            mesh: fishWrapper,
            speed: 0.03 + Math.random() * 0.05,
            dir: Math.random() > 0.5 ? 1 : -1,
            phase: Math.random() * Math.PI * 2
        };
        
        if(data.dir === -1) fishWrapper.rotation.y = Math.PI;
        
        fishes.push(data);
        fishGroup.add(fishWrapper);
    }

    // Bubbles
    for(let i=0; i<40; i++) {
        const b = new THREE.Mesh(
            new THREE.SphereGeometry(0.1, 8, 8),
            new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.3 })
        );
        b.position.set((Math.random()-0.5)*30, (Math.random()-0.5)*15 - 5, Math.random()*8);
        bubbles.push(b);
        bubbleGroup.add(b);
    }
}

// Lighting for "Sunlight" look
const light = new THREE.DirectionalLight(0xffffff, 1.5);
light.position.set(5, 10, 10);
scene.add(light);
scene.add(new THREE.AmbientLight(0xffffff, 0.6));

initScene();

let animId;
function animate(t) {
    animId = requestAnimationFrame(animate);
    const time = t * 0.001;

    fishes.forEach(f => {
        f.mesh.position.x += f.speed * f.dir;
        f.mesh.position.y += Math.sin(time + f.phase) * 0.008;
        // Tail Swish
        f.mesh.rotation.y = (f.dir === 1 ? 0 : Math.PI) + Math.sin(time * 12) * 0.15;

        if(f.mesh.position.x > 18) f.mesh.position.x = -18;
        if(f.mesh.position.x < -18) f.mesh.position.x = 18;
    });

    bubbles.forEach(b => {
        b.position.y += 0.02;
        if(b.position.y > 0) b.position.y = -10; // Pop at the horizon
    });

    renderer.render(scene, camera);
}
animate();

let isTransitioning = false;
function startTransition(event, url) {
    if (isTransitioning) return;
    isTransitioning = true;

    const clicked = event.currentTarget;
    const allZones = document.querySelectorAll('.click-zone');

    const tl = gsap.timeline({
        onComplete: () => { 
            cancelAnimationFrame(animId);
            renderer.dispose();
            window.location.href = url; 
        }
    });

    // Surge logo towards screen
    tl.to(clicked, { 
        scale: 18, 
        opacity: 0, 
        duration: 1.3, 
        ease: "expo.in" 
    }, 0);

    allZones.forEach(z => {
        if(z !== clicked) tl.to(z, { opacity: 0, scale: 0.2, duration: 0.5 }, 0);
    });

    // Fish dive deep on click
    fishes.forEach(f => {
        tl.to(f.mesh.position, { y: -20, z: -10, duration: 1.2, ease: "power2.in" }, 0);
    });

    tl.to("#transitionOverlay", { opacity: 1, duration: 0.6 }, "-=0.4");
}

window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>